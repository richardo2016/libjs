!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ray",[],t):"object"==typeof exports?exports.ray=t():e.ray=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}({0:function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e){return{type:e.type,size:e.size,name:e.name,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate}}function s(e,t){var r=this,o=e.target,i=o||{},a=i.files,u=void 0===a?[]:a,c=Object.getPrototypeOf(u);return-1===Object.getOwnPropertySymbols(c).indexOf(Symbol.iterator)&&(u=Array.apply(null,u)),{event:e,files:u,resetInput:function(){var t=n(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.target.value="");case 1:case"end":return t.stop()}},t,r)}));return function(){return t.apply(this,arguments)}}()}}function f(e){if(e instanceof File){var t=e.name,r=void 0===t?"":t;return r&&r.substr(r.lastIndexOf(".")+1)}}function l(e){var t=e.target,r=t||{},n=r.files;return void 0===n?[]:n}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"FileError",function(){return y}),r.d(t,"ImageError",function(){return h}),r.d(t,"readFileDataURL",function(){return v}),t.getFileInfoSync=c,r.d(t,"checkFile",function(){return m}),r.d(t,"readImageInfo",function(){return g}),r.d(t,"checkImage",function(){return b}),t.filesOfInput=s,t.fileExt=f,r.d(t,"readFileArrayBuffer",function(){return w}),t.getFileListFromEvent=l;var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=function(){function e(t){var r=t.code,n=void 0===r?0:r,o=t.message,i=void 0===o?"ok":o,c=a(t,["code","message"]);u(this,e),this.code=n,this.message=i,this.payload=c}return d(e,[{key:"isError",get:function(){return!0}}]),e}(),y=function(e){function t(e){u(this,t);var r=e.file,n=a(e,["file"]);n.code="file:error:"+n.code;var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.file=r,i}return i(t,e),d(t,[{key:"isFileError",get:function(){return!0}}]),t}(p),h=function(e){function t(e){u(this,t);var r=e.image,n=a(e,["image"]);n.code="image:error:"+n.code;var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.image=r,i}return i(t,e),d(t,[{key:"isImageError",get:function(){return!0}}]),t}(p),v=function(e){return new Promise(function(t,r){e instanceof File||r(new TypeError("not-file"));var n=new FileReader;n.onloadend=function(e){t(n.result)},n.onabort=function(e){return r({event:e,progress:"onabort"})},n.onerror=function(e){return r({event:e,progress:"onerror"})},n.readAsDataURL(e)})},m=function(){var e=n(regeneratorRuntime.mark(function e(t,r){var n,o,i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r||{},o=n.maxSize,i=void 0===o?2097152:o,a=n.minSize,u=void 0===a?1024:a,t instanceof File){e.next=3;break}throw new y({code:"type",error:"Not File Type",file:t});case 3:if(!(t.size>i)){e.next=5;break}throw new y({code:"over_size",message:"File Over Maxsize: "+i,file:t,maxSize:i,maxkb:i/1024});case 5:if(!(u>0&&t.size<u)){e.next=7;break}throw new y({code:"lower_size",message:"File Lower Minsize: "+u,file:t,minSize:u,minkb:u/1024});case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=n(regeneratorRuntime.mark(function e(t,r){var n,o,i,a,u,c,s,l,d,p,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r||{},o=n.image,i=void 0===o?new Image:o,a=n.reader,u=void 0===a?new FileReader:a,c=n.acceptPng,s=void 0===c||c,l=n.acceptBmp,d=void 0!==l&&l,p=n.acceptJpg,h=void 0===p||p,e.abrupt("return",new Promise(function(e,r){if(-1===[s&&"image/png",h&&"image/jpeg",d&&"image/bmp"].filter(function(e){return e}).indexOf(t.type))return void r(new y({code:"image_mime_type",error:"Invalid Image Type",file:t}));u.onload=function(e){i.src=e.target.result},u.onabort=function(e){return r(new y({code:"onabort"}))},u.onerror=function(e){return r(new y({code:"onerror"}))},i.onload=function(){e({image:i,file:t,width:i.width,height:i.height,kb:t.size/1024,mb:t.size/1048576,ext:f(t)})},u.readAsDataURL(t)}));case 2:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),b=function(){var e=n(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Image){e.next=2;break}throw new h({code:"type",error:"Not Image Type",image:t});case 2:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),w=function(e){return new Promise(function(t,r){if(!(e instanceof File))return new Error("not-file");var n=new FileReader;n.onloadend=function(e){t(n.result)},n.readAsArrayBuffer(e)})}},1:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=window,u=a.localStorage,c=function(){function e(t,r){var i=this;if(n(this,e),u){var a=r||{},c=a.syncInterval,s=void 0===c?2e3:c;return t=t||"default",this.hasChanged=!1,this.store={},this.dbName="localStorageORM/"+t,"object"===(void 0===u?"undefined":o(u))&&(this.hasLocalStorage=!0,setTimeout(function(){return i.update()},1),setInterval(function(){i.hasChanged&&(i.sync(),i.syncEnd())},s)),this}}return i(e,[{key:"update",value:function(){var e=u.getItem(this.dbName);return e&&(this.store=JSON.parse(e)),this.store}},{key:"syncStart",value:function(){this.hasChanged=!0}},{key:"sync",value:function(){u.setItem(this.dbName,JSON.stringify(this.store))}},{key:"syncEnd",value:function(){this.hasChanged=!1}},{key:"get",value:function(e){return e?this.store[e]:this.store}},{key:"set",value:function(e,t){this.store[e]=t,this.syncStart()}},{key:"delete",value:function(e){this.store.hasOwnProperty(e)&&(delete this.store[e],this.syncStart())}},{key:"find",value:function(e,t){var r=void 0,n=void 0,o=void 0;for(o=[],r=0,n=this.store.length;r<n;r++)this.store[r][e]&&this.store[r][e]===t&&o.push(this.store[r]);return o}},{key:"each",value:function(e){var t=void 0;for(t in this.store)this.store.hasOwnProperty(t)&&e.bind(this,t,this.store[t])}}]),e}();t.default=c},13:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={file:r(0),localStorage:r(1)}}})});