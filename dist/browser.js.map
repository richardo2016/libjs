{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap 83101eb2994e6cfc8649?74c1","webpack:///./src/browser/file.js","webpack:///./src/browser/local-storage/index.js","webpack:///./src/browser/index.js"],"names":["BaseError","code","message","payload","FileError","params","file","rest","ImageError","image","readFileDataURL","Promise","resolve","reject","File","TypeError","reader","FileReader","onloadend","evt","result","onabort","event","progress","onerror","readAsDataURL","getFileInfoSync","type","size","name","lastModified","lastModifiedDate","options","maxSize","minSize","error","maxkb","minkb","checkFile","img","Image","acceptPng","acceptBmp","acceptJpg","filter","x","indexOf","onload","e","src","target","width","height","kb","mb","ext","fileExt","readImageInfo","checkImage","filesOfInput","el","files","proto","Object","getPrototypeOf","symbols","getOwnPropertySymbols","Symbol","iterator","Array","apply","resetInput","value","substr","lastIndexOf","readFileArrayBuffer","Error","readAsArrayBuffer","getFileListFromEvent","window","localStorage","Storage","dbName","syncInterval","hasChanged","store","hasLocalStorage","setTimeout","update","setInterval","sync","syncEnd","db","getItem","JSON","parse","setItem","stringify","key","data","syncStart","hasOwnProperty","attribute","i","iMax","length","push","callback","bind","require"],"mappings":"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","file":"browser.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ray\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ray\"] = factory();\n\telse\n\t\troot[\"ray\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 83101eb2994e6cfc8649","class BaseError {\n  constructor ({code = 0, message = 'ok', ...payload}) {\n    this.code = code\n    this.message = message\n    this.payload = payload\n  }\n\n  get isError () {\n    return true\n  }\n}\n\nexport class FileError extends BaseError {\n  constructor (params) {\n    let { file, ...rest } = params\n    rest.code = 'file:error:' + rest.code\n    super(rest)\n    this.file = file\n  }\n\n  get isFileError () {\n    return true\n  }\n}\n\nexport class ImageError extends BaseError {\n  constructor (params) {\n    let { image, ...rest } = params\n    rest.code = 'image:error:' + rest.code\n    super(rest)\n    this.image = image\n  }\n\n  get isImageError () {\n    return true\n  }\n}\n\nexport const readFileDataURL = (file) => {\n  return new Promise((resolve, reject) => {\n    if (!(file instanceof File)) reject(new TypeError('not-file'))\n    let reader = new FileReader()\n\n    reader.onloadend = (evt) => {\n      resolve(reader.result)\n    }\n\n    /* eslint-disable prefer-promise-reject-errors */\n    reader.onabort = evt => reject({event: evt, progress: 'onabort'})\n    reader.onerror = evt => reject({event: evt, progress: 'onerror'})\n    /* eslint-enable prefer-promise-reject-errors */\n\n    reader.readAsDataURL(file)\n  })\n}\n\nexport function getFileInfoSync (file) {\n  let {\n    type, // MIME\n    size, // B\n    name,\n    lastModified,\n    lastModifiedDate\n  } = file\n  return {\n    type, // MIME\n    size, // B\n    name,\n    lastModified,\n    lastModifiedDate\n  }\n}\n\nexport async function checkFile (file, options) {\n  let {\n    maxSize = 1024 * 1024 * 2, // 2MB\n    minSize = 1024 // 1KB\n  } = options || {}\n\n  if (!(file instanceof File)) {\n    throw new FileError({code: 'type', error: 'Not File Type', file})\n  }\n\n  if (file.size > maxSize) {\n    throw new FileError({code: 'over_size', message: `File Over Maxsize: ${maxSize}`, file, maxSize, maxkb: maxSize / 1024})\n  }\n\n  if (minSize > 0 && file.size < minSize) {\n    throw new FileError({code: 'lower_size', message: `File Lower Minsize: ${minSize}`, file, minSize, minkb: minSize / 1024})\n  }\n\n  return file\n}\n\nexport async function readImageInfo (file, options) {\n  let {\n    image: img = new Image(),\n    reader = new FileReader(),\n    acceptPng = true,\n    acceptBmp = false,\n    acceptJpg = true\n  } = options || {}\n\n  return new Promise(function (resolve, reject) {\n    if ([acceptPng && 'image/png', acceptJpg && 'image/jpeg', acceptBmp && 'image/bmp'].filter(x => x).indexOf(file.type) === -1) {\n      reject(new FileError({code: 'image_mime_type', error: 'Invalid Image Type', file}))\n      return\n    }\n\n    reader.onload = (e) => {\n      img.src = e.target.result\n    }\n\n    reader.onabort = evt => reject(new FileError({code: 'onabort'}))\n    reader.onerror = evt => reject(new FileError({code: 'onerror'}))\n\n    img.onload = function () {\n      resolve({image: img, file, width: img.width, height: img.height, kb: file.size / 1024, mb: file.size / (1024 * 1024), ext: fileExt(file)})\n    }\n\n    reader.readAsDataURL(file)\n  })\n}\n\nexport async function checkImage (image, options) {\n  if (!(image instanceof Image)) {\n    throw new ImageError({code: 'type', error: 'Not Image Type', image})\n  }\n}\n\nexport function filesOfInput (event, options) {\n  let el = event.target,\n      { files = [] } = el || {}\n\n  let proto = Object.getPrototypeOf(files),\n      symbols = Object.getOwnPropertySymbols(proto)\n\n  if (symbols.indexOf(Symbol.iterator) === -1) {\n    files = Array.apply(null, files)\n  }\n\n  return { event, files, resetInput: async () => (event.target.value = '') }\n}\n\nexport function fileExt (file) {\n  if (!(file instanceof File)) {\n    return\n  }\n\n  let { name = '' } = file\n  return name && name.substr(name.lastIndexOf('.') + 1)\n}\n\nexport const readFileArrayBuffer = (file) => {\n  return new Promise((resolve, reject) => {\n    // console.info('file', file)\n    if (!(file instanceof File)) return new Error('not-file')\n    let reader = new FileReader()\n\n    reader.onloadend = (evt) => {\n      resolve(reader.result)\n    }\n\n    reader.readAsArrayBuffer(file)\n  })\n}\n\nexport function getFileListFromEvent (event) {\n  let el = event.target,\n      { files = [] } = el || {}\n\n  return files\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/browser/file.js","let { localStorage } = window\n\nexport default class Storage {\n  constructor (dbName, options) {\n    if (!localStorage) {\n      return\n    }\n\n    let { syncInterval = 2000 } = options || {}\n\n    dbName = dbName || 'default'\n\n    this.hasChanged = false\n    this.store = {}\n    this.dbName = 'localStorageORM/' + dbName\n\n    if (typeof localStorage === 'object') {\n      this.hasLocalStorage = true\n\n      // delayed storage read\n      setTimeout(() => this.update(), 1)\n\n      // save interval\n      setInterval(() => {\n        if (this.hasChanged) {\n          this.sync()\n          this.syncEnd()\n        }\n      }, syncInterval)\n    }\n\n    return this\n  }\n\n  update () {\n    let db = localStorage.getItem(this.dbName)\n    if (db) {\n      this.store = JSON.parse(db)\n    }\n    return this.store\n  }\n\n  syncStart () {\n    this.hasChanged = true\n  }\n\n  sync () {\n    localStorage.setItem(this.dbName, JSON.stringify(this.store))\n  }\n\n  syncEnd () {\n    this.hasChanged = false\n  }\n\n  get (key) {\n    return key ? this.store[key] : this.store\n  }\n\n  set (key, data) {\n    this.store[key] = data\n    this.syncStart()\n  }\n\n  delete (key) {\n    if (this.store.hasOwnProperty(key)) {\n      delete this.store[key]\n      this.syncStart()\n    }\n  }\n\n  find (attribute, value) {\n    let i, iMax, result\n\n    result = []\n\n    for (i = 0, iMax = this.store.length; i < iMax; i++) {\n      if (this.store[i][attribute] && this.store[i][attribute] === value) {\n        result.push(this.store[i])\n      }\n    }\n\n    return result\n  }\n\n  each (callback) {\n    let key\n\n    for (key in this.store) {\n      if (this.store.hasOwnProperty(key)) {\n        callback.bind(this, key, this.store[key])\n      }\n    }\n  }\n}\n\n/*******************\n Usage\n *******************/\n\n// // Initiate\n// let users = new localStorageORM(\"users\" /* database name */, 1000 /* save interval in ms */)\n//\n// // Set value to key\n// users.set(\"eva\" /* key */, {hair: \"brown\", eyes: \"green\"} /* value */)\n//\n// // Get value by key\n// eva = users.get(\"eva\" /*key */)\n//\n// // Get an array of documents by attribute.\n// brownHairedPeople = users.find(\"hair\" /* attribute */, \"brown\" /* value */)\n//\n// // For each document, call a function\n// users.each(function(key, data) {\n//   console.log(key, data)\n// })\n\n\n\n// WEBPACK FOOTER //\n// ./src/browser/local-storage/index.js","export default {\n  file: require('./file'),\n  localStorage: require('./local-storage')\n  // ieShiv: require('./ie-shiv/env'),\n  // location: require('./bom/location'),\n  // wechat: require('./env/wechat')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/browser/index.js"],"sourceRoot":""}